# 1. kustomize <!-- omit in toc -->

# 1. delete public ns
```vim
kubectl delete ns public --force --grace-period=0

# forzar el "finalizer"
export NS=public &&
kubectl get namespace "${NS}" -o json \
  | tr -d "\n" | sed "s/\"finalizers\": \[[^]]\+\]/\"finalizers\": []/" \
  | kubectl replace --raw /api/v1/namespaces/${NS}/finalize -f -
```
# 2. GitHub Deploy Project folder structure
public-api/
- base
- overlays
- - stage
- - production

# 3. Create Kustomize yaml files
> [app kustomize](./assets/kustomize/)
# 4. build
```vim
kustomize build overlays/stage
```
# 5. apply
```vim
kubectl apply -k overlay/stage
```

# 6. registry secret & DNS stage

