# 1. kustomize <!-- omit in toc -->
> [kustomize](https://kustomize.io/)
# 1. delete public ns
```vim
kubectl delete ns public-stage --force --grace-period=0

# forzar el "finalizer"
export NS=public-stage &&
kubectl get namespace "${NS}" -o json \
  | tr -d "\n" | sed "s/\"finalizers\": \[[^]]\+\]/\"finalizers\": []/" \
  | kubectl replace --raw /api/v1/namespaces/${NS}/finalize -f -
```

# 2. Install Kustomize
```vim
sudo snap install kustomize

kustomize version
```
# 3. GitHub Deploy Project folder structure
public-api/
- base
- overlays
- - stage
- - production

# 4. Create Kustomize STAGE yaml files
> [app kustomize](./assets/kustomize/)



# 5. build
```vim
kustomize build overlays/stage
```
# 6. apply
```vim
kubectl apply -k overlay/stage
```

# 7. Check
```vim
 curl  http://api.<NAME>.kubelabs2.tk/
```


